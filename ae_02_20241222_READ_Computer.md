## E 阅读
### Computer 计算机
#### 20240801 小结 IP 
```
计算机单位
8bit= 1B
1024B = 1KB
1024KB = 1MB
1024MB = 1GB
1024GB = 1TB
1024TB = 1PB
1024PB=1EB

1024EB=1ZB
1024ZB=1YB
1024YB=1BB
1024BB=1NB
1024NB=1DB
1024DB=1CB
1024CB=1XB
```
```
进制转换
2进制（0~1），如11000000.10101000.00000000.00000001
10进制（0~9），如192.168.0.1 ，常用
16进制（0~15=0~9+abcdef），如c0.a8.0.1，10a 11b 12c 13d 14 e 15f

十进制转2进制，除2取余倒着念
十进制转8进制，除8取余倒着念
十进制转16进制，除16取余倒着念
2进制转8进制，三个2进制组成一个8进制
2进制转16进制，四个2进制组成一个16进制

7654  3210
1111  1111   255
1111  1110   254
1111  1100   252
1111  1000   248
1111  0000   240
1110  0000   224
1100  0000   192
1000  0000   128
0100  0000   32
0001  0000   16
0000  1000   8
0000  0100   4
0000  0010   2
0000  0001   1
```
```
IPV4网络类型：决定如何划分成网络部分和主机部分
A类，1-126，大网络
B类，128-191，中间
C类，192-223，少量节点
D类，224-239，多播
E类，240-225，保留

IPV4子网掩码：区分网络位和主机位
A类，255.0.0.0
B类，255.255.0.0
C类，255.255.255.0
D类，255.255.255.255

IPV4私网地址：解决公网地址不足，可以重复免费使用
A类中私网地址，10.0.0.0--10.255.255.255
B类中私网地址，172.16.0.0--173.31.255.255
C类中私网地址，192.168.0.0--192.168.255.255
```
```
私网地址：
私网地址本不能上网，
路由配置了PNAT技术，
把私网地址替换成路由器的公网地址，代替上网，
一个局域网只需要一个公网地址就可以了
SMAC--DMAC SIP--DIP SPort--DPort

子网掩码：
掩码全为1为原IP的网络位，剩余主机位
主机位：
主机个数，
主机地址不能全为0，不能全为1，
全为0用来表示网络地址，全1用作广播。
网络位：
网络地址第一个数字不能为127，不能全为0，不能全为1。 
网络类型只有A、B、C三类可以分配给计算机和网络设备。 
在局域网LAN中，网络位相同的两台计算机可以互相通信，
网络位相同，主机位必不相同，即网络地址相同主机地址必须唯一。
```
```
IPV6格式
ABCD:EF01:2345:6789:ABCD:EF01:2345:6789

前导0省略
2001:0DB8:0000:0023:0008:0800:200C:417A -> 
2001:DB8:0:23:8:800:200C:417A 

多个0压缩
FF01:0:0:0:0:0:0:1101  -> FF01::1101
0:0:0:0:0:0:0:1  ->::1
0:0:0:0:0:0:0:0  ->::


IPV4：32位2进制，4位点分10进制，a.b.c.d
IPV6：128位2进制，8位冒分16进制，a:b:c:d:e:f:g:h，4倍IPV4
IPV6内嵌IPV4，前96位采用冒分16进制，后32位采用IPV4点分十进制
X:X:X:X: X:X:X:X
X:X:X:X: X:X:a.b.c.d
::192.168.0.1
::FFFF:192.168.0.1
```
```
IPV4特殊、不能用IP：
0.0.0.0 （默认地址）
255.255.255.255 （广播地址）
127.x.x.x
A.0.0.0、A.255.255.255 （带字母的，16进制？不行，只能10进制）
169.254.0.0--168.254.255.255 （没有IP时自动配的）

IPV6特殊
0:0:0:0 :0:0:0:0（::）
相当于IPV4的0.0.0.0，通常在使用状态DHCP配置时，用作主机的源地址
0:0:0:0: 0:0:0:1 （::1）相当于IPV4地址 127.0.0.10
0:0:0:0: 0:0:0:192.168.100.1 （::1）
在同时支持IPV4和IPV6的网络中，从IPV4转换而来的IPV6地址通常这样书写

2000::/3 全局单播地址范围
FCOO:: 唯一的本地单播地址范围（公网）
FE80::/10 链路本地单播地址范围（临时）
FFOO::/8 组播地址范围
3FFF:FFFF:: /32 保留距离和编写文档时使用
2001:0088:: /32 保留举例和编写文档时使用
2002::/16 保留供6t 04隧道使用，6t04隧道技术是一种从IPV4迁移到IPV6的方法，让IPV6分组能够通过IPV4网络进行传输，而无需配置显示的隧道
```
#### 20240808《计算机网络 自顶层向下方法》第1章
下载：https://zh.z-lib.gs/book/19208042/ef9955/计算机网络自顶向下方法原书第七版.html
##### 目录
###### 第1章计算机网络和因特网
1.1什么是因特网
1.1.1具体构成描述
1.1.2服务描述
1.1.3什么是协议
1.2网络边缘
1.2.1接入网
1.2.2物理媒体3
1.3网络核心15
1.3.1分组交换15
1.3.2电路交换
1.3.3网络的网络22
1.4分组交换网中的时延、丢包和吞吐量24
1.4.1分组交换网中的时延概述24
1.4.2排队时延和丢包
1.4.3端到端时延28
1.4.4计算机网络中的春吐量30
1.5协议层次及其服务模型
1.5.1分层的体系结构2
1.5.2封袋36
1.6面对攻击的网络37
1.7计算机网络和因特网的历史40
1.7.1分组交换的发展：1961~1972 17
1.7.2专用网络和网络互联：1972~1980 12
1.7.3网络的激增：1980～199012
1.7.4因特网爆炸：20世纪90年代1
1.7.5最新发展44
1.8小结44
课后习题和问题46
复习题46
习题47
Wireshark实验51
人物专访52
###### 第2章应用层
2.1应用层协议原理
2.1.1网络应用程序体系结构55
2.1.2进程通信·57
2.1.3可供应用程序使用的运输
服务9
2.1.4陶特网提供的运输服务60
2.1.5应用县协议63
2.1.6本书涉及的网络应用63
2.2Web和HTTP64
2.2.1HTTP概况
2.2.2非持续连接和持续连接
2.2.3HTIP报文格式6
2.2.4用户与服务器的交互：s0oki70
2.2.5Web缓存R
2.2.6条件GET方法
2.3因特网中的电子邮件
2.3.1SMTP
2.3.2与HTTP的对比78
2.3.3邮件报文格式
2.3.4邮件访问协议
2.4DNS：因特网的目录服务83
2.4.1DNS提供的服务
2.4.2DNS工作机理概述85
2.4.3DNS记录和报文
2.5P2P文件分发
2.6视频流和内容分发网97
2.6.1因特网视频97
2.6.2HTTP流和DASH
2.6.3内容分发网98
2.6.4学习案例：Netix、YouTube 和101
27套接字编程：生成网络应用104
2.7.1UDP套接字编程105
2.7.TCP套接字编程109
2.8小结112
课后习题和问题
复习题
习题·114
套接字编程作业118
Wireshark实验：HTTP119
Wireshark实验：DNS120
人物专访120
###### 第3章运输层121
3.1概述和运输层服务121
3.1.1运输层和网络层的关系22
3.1.2因特网运输层概述·123
3.2多路复用与多路分解125
3.3无连接运输：UDP130
3.3.1UDP报文段结构132
3.3.2UDP检验和133
3.4可靠数据传输原理134
3.4.1构造可靠数据传输协议135
3.4.2流水线可靠数据传输协议143
3.4.3回退N步145
3.4.4选择重传148
3.5面向连接的运输：TCP152
3.5.1TCP连接152
3.5.2TCP报文段结构154
3.5.3往返时间的估计与超时157
3.5.4可靠数据传输159
3.5.流量控制164
3.5.6TCP连接管理166
3.6拥塞控制原理170
3.6.调赛原因与代价171
3.6.2拥塞控制方法175
3.7TCP拥塞控制176
3.7.1公平馆183
3.7.2明确桐塞通告：网络辅助拥塞184
3.8小结185
课后习题和问题187
复习题181
习题189
编程作业195
Wireshak实验：探究TCP196
Wireshark实验：探究UDP196
人物专访196
###### 第4章网络层：数据平面198
4.1网络层概述·198
4.1.1转发和路由选择：数据平面和
控制平面199
4.1.2网络服务模型202
4.2路由器工作原理203
4.2.1输入端口处理和基于目的地
转发205
4.2.2交换207
4.2.3输出口处理209
4.2.4何处出现排队209
4.2.5分组调度211
4.3网际协议：IPv4、寻址、IP6及
其他214
4.3.1IPy4数据报格式214
4.3.2IPv4数据报分片216
4.3.3IPv4编址217
4.3.4网络地址转换225
4.3.5IP6227
4.4通用转发和SDN231
4.4.1匹配233
4.4.2动作234
4.4.3匹配加动作操作中的OpenFlo
例子234
.5小结236
课后习题和问题236
复习题236
习题37
Wireshark实验240
人物专访241
###### 第5章网络层：控制平面242
5.1概述242
5.2路由选择算法244
5.2.1链路状态路由选择算法246
5.2.2距离向量路由选择算法248
5.3因特网中自治系统内部的路由
选择：0SPF254
ISP之间的路由选择：BGP256
5.4.BGP的作用257
5.4.2通告BGP路由信息257
5.4.3确定最好的路由259
5.4.4IP任播261
5.4.5路由选择策略262
5.4.6拼装在一起：在因特网中
呈现264
5.5SDN控制平面265
5.5.1SDN控制平面：SDN控制器和
SDN网络控制应用程序266
5.5.2OpenFlow协议267
5.5.3数据平面和控制平面交互的
例子269
5.5.4SDN的过去与来来270
5.6ICMP:因特网控制报文协议·272
5.7网络管理和SNMP274
5.7.1网络管理框架274
5.7.2简单网络管理协议275
5.8小结277
课后习题和问题278
复习题
习题…279
套接字编程作业281
编程作业282
Wireshark实验282
人物专访283
###### 第6章链路层和局城网285
6.1链路层概述285
6.1.1链路层提供的服务287
6.1.2链路层在何处实现·287
6.2差错检测和纠正技术288
6.2.1奇偶校验289
6.2.2检验和方法290
6.2.3循环元余检测291
6.3多路访问链路和协议292
6.3.1信道划分协议
6.3.2随机接入协议295
6.3.3轮流协议301
6.3.4DOCSIS:用于电缆因特网接入的
链路层协议301
6.4交换局域网302
6.4.1链路层寻址和ARP303
6.4.2以太网308
6.4.3链路层交换机312
6.4.4虚拟局城网317
6.5链路虚拟化：网络作为链路层319
6.6数据中心网络322
6.7回顾：Web页面请求的历程326
6.7.1准备：DHCP、UDP、IP和
以太网326
6.7.2仍在准备：DNS和ARP327
6.7.3仍在准备：城内路由选择到
DNS服务器328
6.7.4Web客户-服务器交互：TCP和
HTTP329
6.8小结330
课后习题和问题331
复习题331
习题…331
Wireshark实验335
人物专访·336
###### 第7章无线网络和移动网络338
7.1概述339
7.2无线链路和网络特征341
7.3WiFi：802.11无线LAN346
7.3.1802.11体系结构347
7.3.2302.11MAC协议350
7.3.3IEEE802.11枝353
7.3.4在相同的IP子网中的
移动性355
7.3.5802.11中的高级特色356
7.3.6个人域网络：蓝牙和
ZigBee357蜂赛因特网接人358
7.4.1蜂窝网体系结构概述859
7.4.23G蜂窝数据网：将因特网扩展
到蜂窝用户360
7.4.3走向4G：LTE362
7.5移动管理：原理364
7.5.1等址367
7.5.2路由选择到移动节点….367
76移动IP371
7.7管理蜂窝网中的移动性374
7.7.1对移动用户呼叫的路由选择375
7.7.2GSM中的切换376
7.8无线和移动性：对高层协议的
影响378
7.9小结380
课后习题和问题380
复习题380
习题381
Wireshark实验383
人物专访·383
###### 第8章计算机网络中的安全385
8.1什么是网络安全385
8.2密码学的原则387
8.2.1对称密钥密码体制388
8.2.2公开密钥加密392
8.3报文完整性和数字签名·396
8.3.1密码散列函数397
8.3.2报文鉴别码398
3.3.3数字签名399
3.4端点鉴别404别协议ap1.0404
8.4.2鉴别协议ap2.0·405
3.4.签别协议ap3.0405
客别协议p3.406
.4.5别协议ap4.0406
安全电子邮件407
3.5.1安全电子邮件407
3.5.2PGP409
8.6使TCP连接安全：SSL410
8.6.1宏观描述411
8.6.2更完整的描述413
8.7网络层安全性：IPsec和虚拟
专用网415
8.7.1IPsec和虚拟专用网415
8.7.2AH协议和ESP协议416
8.7.3安全美联416
8.7.4IPsec数据报417
8.7.5IKE：IPsec中的密钥管理420
8使无线LAN安全420
8.8.1有线等效保密421
8.8.2IEEE802.11i422
8.9运行安全性：防火墙和人侵检测
系统424
8.9.1防火培424
8.9.2入侵检测系统429
3.10小结431
课后习题和问题432
复习题432
习题434
Wireshark实验437
IPsee实验437
人物专访·438
###### 第9章多媒体网络439
9.1多媒体网络应用439
9.1.1视频的性质439
9.1.2音频的性质440
9.1.3多媒体网络应用的类型441
9.2流式存储视频443
9.2.1UDP流444
9.2.2HTTP流444
9.3IP语音447
9.3.1尽力而为服务的限制448
9.3.2在接收方消除音额的时延
抖动449
9.3.3从丢包中恢复451
9.3.4学习策例：使用Skype的
VoIP453
9.4实时会话式应用的协议·455
9.4.1RTP455
2.4.2SIP457
9.5支持多媒体的网络461
9.5.1定制尽力而为网络462
9.5.2提供多种类型的服务463
9.5.3区分服务468
9.5.4每连接服务质量保证：资源
预约和呼叫准入470
9.6小结472
课后习题和问题473
复习题
习题
编程作业477
人物专访478
参考文献480
##### 笔记
```
源向目的发送一个分组：
分组L比特，传输速率R比特/秒，传输时间L/R秒。
每`L/R`秒周期性到达1个分组，不会有排队时延。
每`L/R`秒突发式同时到达n个分组，
分组1无时延，分组n有`(n-1)(L/R)`秒排队时延。
源向目的发送P个分组，经N路由器存储转发：
即N+1条链路，端到端时延为(N+P)(L/R)秒。 

源向目的发送1个分组，经1路由器存储转发： 
即2条链路， 
L/R秒，分组到路由器；2L/R秒，分组到目的。
如不存储，则L/R秒。

源向目的发送3个分组，经1路由器存储转发： 
即2条链路， 
L/R秒，分组一到路由器； 
2L/R秒，分组一到目的，分组二到路由器；
3L/R，分组二到目的，分组三到路由器；
4L/R，分组三到目的。

源向目的发送1个分组，经N-1路由器存储转发：
即N条链路，端到端时延为N(L/R)秒。

源向目的发送P个分组，经N-1路由器存储转发：
即N条链路，端到端时延为(N+P-1)(L/R)秒。 
```
```
传640 000比特，创建电路500ms，24时隙/秒，传输速率1.536Mbps：
电路传输速率1.536Mbps/24=64kbps，
每条电路传输时间640kb/64kbps+500ms=10.5s。

用户10%时间产生数据速率0~100kbps，一条1Mbps链路：
电路交换，每用户100kbps，一条链路最多支持10用户并发即最多10条电路。 
分组交换，支持35个用户时，
10或更少用户并发概率约0.9996，分组交换没有时延与电路交换一样；
超过10用户并发概率约0.0004，分组 [聚合数据速率] 超过链路输出容量，
输出队列变长，直到 [聚合输入速率] 重新低于[1Mbps]，队列变短。
因此，分组交换一条链路至少可支持35条电路，3倍用户数也是如此。
且99.9%的概率分组交换性能与电路交换相当。

10个用户9/10静默，1用户产生1000个1000比特突发分组：
电路交换，若1秒=100帧，每帧10时隙，每时隙1000比特，
但用户每帧只能用1个时隙传数据，10^6比特要1000帧，10s。
分组交换，用户能够以1Mbps全部链路速率发送分组，全部发送需要1秒。 

1Mb数据，10条电路，1kbps电路速率：
电路交换，1s为100帧，1帧10时隙，1时隙1kb，1Mb要1000帧10s。
分组交换，1kbps，1Mb要1s。
同样一条连接10个电路，分组交换性能更好。
```
```
文件F比特，接收用T秒，平均吞吐量：`F/T bps`
链路传输速率 R1,R2,...,Rn。路由器与客户速率 Rc，与服务器速 Rs
`吞吐量` min{R1,R2,...,Rn}。min{Rc,Rs}，时间 F/min{Rc,Rs}
每组L比特，a组，传输速率R bit/s，
分组到达速率a pkt/s，比特到达速率La bps。流量强度 La/R。

吞吐量限制因素通常是`接入网`，还取决于干扰流量：
客户-服务器10对，路由器与客户速率Rc，与服务器速Rs，核心中一条共同链路速率R，
R远远大于Rc,Rs，吞吐量 min{Rc,Rs}。
R=5Mbps与Rc=1Mbps，Rs=2Mbps同量级，公共链路平分速率，吞吐量 500kbps，
下载瓶颈不再位于`接入网`而位于核心中`共享链路`。
```
`因特网` `主机 端系统` `客户` `服务器` `数据中心` 互联了众多计算设备的网络 
`接入网` `通信链路` `分组交换机` `边缘路由器` 互联通信

`ISP网络` `用户 内容提供商` `低层ISP` `第一层ISP` `高速路由器`
`网络的网络` `客户 提供商` `PoP` `多宿` `对等` `IXP` `内容提供商`
`接入服务` `端系统` `内容提供商`
`住宅宽带接入` `高速局域网接入` `移动无线接入`
`家庭` `DSL电话` `电缆电视` `FTTH AON/PON` `卫星` `拨号`
`企业` `以太网` `WiFi 数十米` `组合`
`广域` `蜂窝 数万米` `3G` `LTE`
`Web站点` `视频服务器接入`

`通信链路` `双绞铜线` `同轴电缆` `光纤` `无线局域` `卫星`
`分组交换机` `路由器 网络核心` `链路交换机 接入网`
`边缘路由器`：端系统到任何其他端系统的第一台路由器

`套接字接口 API` `通信规则`
`RFC` `因特网工程任务组IETF` `TCP/IP` `HTTP` `SMTP`
`协议栈` `路由器3 链路交换机2 因特网5 OSI7`
`物理1 链路2 网络3 运输4 应用5`
`物理 数据链路 网络 运输 会话5 表示6 应用`

`端系统 分布式应用5` `分组交换机 网络3` `加速数据交换`
`路由选择协议` `分组` `目的IP地址` `转发表` `输出链路`
`封装` `首部 上层有效载荷` `报文message` `报文段segment` `数据报datatgram` `帧frame`

`存储转发` `输出队列` `排队时延` `丢包`
`queue` `proc` `trans ` `prop` `end-end` `nodal` 
`排队` `处理` `传输 L/R` `传播  d/s` `2~3*10^8 m/s`

`传输速率` `时隙 电路 连接` * `电路传输速率`
`分组交换 不预留` `电路交换 预留`
`TDM` `秒` `帧` `时隙` `比特`
`FDM` `带宽 Hz 周期/秒`

`僵尸网络` `恶意软件` `自我复制` `病毒` `蠕虫`
`弱点攻击` `带宽洪泛` `连接洪泛` `DDoS`
`嗅探分组` `IP哄骗`

---
---
DSL
`DSL调制解调器` `分配器` `双绞铜线` `接入复用器DSLAM`
`0~4kHz双向~50kHz上行~1MHz下行` `不对称接入`
`5~10英里` `1609.344 m`。
电缆
`电缆调制解调器` `同轴电缆` `地区枢纽` `光缆` `电缆头端CMTS`
`混合光纤同轴HFC`
FTTH
`用户路由器` `光纤网络端接器ONT` `分配器` `光纤` `光纤线路端接器OLT`
`PON` `AON` `交换因特网`
拨号
`家庭调制解调器` `ISP调制解调器`
以太网
`用户` `双绞铜线` `以太网交换机`
`100Mbps~1Gbps用户~10Gbps服务器`
WiFi
`用户` `接入点` `企业网` `因特网` 
`数十米` `无线局域网LAN` `无线接入技术WiFi`
蜂窝
`用户` `基站` `数万米`
`第三代无线技术3G` `长期演进LTE`
组合
`宽带住宅接入` `无线局域网技术`

---
---
双绞铜线
`电话网` `无屏蔽双绞线UTP` `局域网LAN` 
`10Mbps~10Gbps` `粗细` `距离`
同轴电缆
`同心结构铜导体` `电视系统` `导引型共享媒体`
光纤
`光脉冲` `比特` `高速` `不受电磁干扰` `光缆信号衰减低` `难窃听`
`长途导引型传输媒体` `跨海链路` `长途电话`
`光载波OC标准链路速率` `OC-n` `OC-1 3 12 24 48 96 192 768`
 `n*51.8Mbps` `51.8Mbps~39.8Gbps`
无线电信道
`一类 1~2米` `短距` `个人设备`
`二类 十~百米` `局域` `WiFi`
`三类 数万米` `广域` `蜂窝接入技术`
`同步卫星` `36000km` `280ms` 
`近地轨道LEO卫星` `多个` `覆盖区域`

---
---
```
因特网服务提供商ISP：
ISP网络由多台`分组交换机`和多段`通信链路`组成。
低层ISP通过高层ISP互联，高层ISP由`高速路由器`组成。
ISP各层独立管理，运行`IP协议`，遵循命名和地址规则。

协议：
控制信息在因特网中的接收和发送。
因特网主要协议统称`TCP/IP`，`传输控制协议TCP`、`网际协议IP`

请求评论RFC：
即`IETF`标准文档。
`RFC`，由`因特网工程任务组IETF`研发的一种因特网标准。
`RFC`为解决网络协议问题，定义了`TCP` `IP` `HTTP` `SMTP`等协议。

套接字接口：
是发送程序必遵循的规则集合，使因特网能将数据交付给目的地。
```
```
网络的网络：
`接入ISP`是`客户`，`全球ISP`是`提供商`。
网络结构1，单一的`全球ISP`。
网络结构2，多个`全球ISP`。
网络结构3，多个`区域ISP`与`第一ISP`。
网络结构4，`存在点PoP`、`多宿`、`对等`、`因特网交换点`。
网络结构5，在网络结构4顶部增加`内容提供商`，可与较低层ISP`直接互联`。
十多个`第一层ISP`和数十万个`较低层ISP`组成`网络的网络`，
低层与较高层ISP相连，高层ISP彼此互联，
`用户和内容提供商`是`较低层ISP`的客户，
`较低层ISP`是`较高层ISP`的客户。
-----------------------------------------------
存在点PoP：
`PoP`存在于`除了` `接入ISP`以外的等级结构所有层次。
一个`PoP`是`提供商网络`中的一或多台`路由器`，
`客户ISP`能够与`提供商ISP`连接，
`客户`通过`电信提供商`租用高速链路
将其连接到`PoP`的`路由器`。
-----------------------------------------------
多宿：
任何`除了` `第一层ISP`可以选择与两个及以上`提供商ISP`相连，
一个`接入ISP`可与`两个` `区域ISP`多宿，
也可以和`一个` `第一层ISP`多宿，
多宿的ISP其提供商之一故障仍可继续收发分组。
-----------------------------------------------
对等：
位于`同级结构层次`的一对ISP能够`对等`，
对等ISP的流量经`直接连接`而不通过上游传输，
对等ISP不进行费用结算。
-----------------------------------------------
因特网交换点IXP：
`IXP`是一个汇合点，
多个ISP在这里一起`对等`。
```
```
分布式应用程序：
分布式应用程序涉及多个相互交换数据的`端系统`。
应用程序不会运行在网络核心的`分组交换机`上，
`分组交换机`只用于加速数据交换。

分组交换：
端系统彼此交换报文，报文包含数据或可执行控制功能。
报文通常会分组，通过`分组交换机` `路由器`和`链路交换机`转发，

存储转发传输：
`分组交换机`要先存储整个分组，才能转发。
同理，要完成转发，才能接收下一个分组。

转发表：
`路由选择协议`自动设置`转发表`。
`端系统`有`IP地址`，分组`首部`包含`目的IP地址`，
分组到达路由器，路由器`检查目的IP` `搜索转发表` `映射出链路`
导出分组。 
-----------------------------------------------
电路交换：
`电路交换`在端系统通信时`预留`缓存、链路速率资源，
发送方可以确保的`恒定速率`向接收方传送数据，
传统电话网称建立的连接为`电路`，
`电路`通过`频分复用FDM`或`时分复用TDM`实现。
电路交换传输时间与链路数无关。
-----------------------------------------------
分组交换：
`不预留`资源，
当前分组正被传输时，其他分组需要排队等待。
`分组交换`比`电路交换`更有效：
`电路交换`在`静默期`的资源不能被其他连接所使用，
打电话的人未说话时空闲链路资源不能被利用。 
-----------------------------------------------
电路交换频分复用FDM：
链路为每条连接`专用`一个频段。
电话网络中`带宽`即`频段宽度`常为`4kHz`即`每秒4000周期`；
`调频无线电台`使用`FDM`来共享`88MHz~108MHz`的频谱。
-----------------------------------------------
电路交换时分复用TDM：
`时间`分为等期间`帧`，`帧`分为等数量`时隙`。
每个连接占用指定`时隙`传输数据。
```
$d_{nodal}$ = $d_{queue}$+$d_{proc}$+$d_{trans}$+$d_{prop}$
```
排队时延：
`毫秒到微秒`量级。 
分组交换机存储转发分组。
路由器转发当前分组时，将转发分组进入`输出队列`，产生`排队时延`。
`缓存队列`满，`丢包`。 
取决于先前到达分组的在缓存队列流量。
每个分组`L比特`，传输速率为`Rbps`，
`分组到达队列`的平均速率为`a分组/秒`即`a pkt/s`，
`比特到达队列`的平均速率为`La bps`，
`流量强度`为`La/R`。
设计系统时`流量强度`不能大于1，
La/R $\leq$ 1时，`流量强度`影响`排队时延`。
La/R>1 时队列趋于`无限增加`，实际丢包率随`流量强度`增加而增加，
丢包分组可能基于端到端原则重传。
端到端时延不包括排队。
-----------------------------------------------
处理时延：
`微秒`量级。
检查首部，决定分组出链，检查差错等。
通常是微不足道的，但对路由器最大`吞吐量`有重要影响。
`吞吐量`是一台路由器能够转发分组的最大速率。
-----------------------------------------------
传输时延：
`毫秒到微秒`量级。
分组长`L比特`，链路传输速率`Rbps`，传输时延`L/R`。
对于`10Mbps`及更高传输速率信道如LAN可能是微不足道的，
对于`低速调制解调器链路`发送的长因特网分组，可能`数百毫秒`。
-----------------------------------------------
传播时延：
广域网中`毫秒`量级。
取决于物理媒体，
`传播时延`=`路由器间距`/`传播速率`即`d/s`，
`2*10^8 ~ 3*10^8 m/s`。
对于两台位于同一大学的路由器可能是微不足道的，
对于`同步卫星链路`互联的路由器，是`数百毫秒`。
-----------------------------------------------
往返时延：
源向目发送分组，路由器和目的主机收到组时，向源回送报文，
源记录了收发报文的时间和路由器名字与地址，
以此能重建路由，确定到路由器的往返时延。
分组n发送到路由器的往返时延可能比分组n+1的往返时延更长。
```
```
协议分层：
分层协议的优点是`概念化、结构化`，
缺点是可能`冗余较低层的功能`，
以及`违背分离层次目标`
即某层功能需要仅在其他层才出现的信息。
-----------------------------------------------
各层的所有协议被称为`协议栈`
因特网5层协议栈：
`物理层` `链路层` `网络层` `运输层` `应用层`。
开放系统互联OSI模型7层协议栈：
物理层、数据链路层、网络层、运输层、会话层、表示层、应用层。
分组交换机2、3层协议栈：
`路由器`实现了第一到三层物理、链路、网络层。
`链路交换机`实现了第一第二层物理、链路。
-----------------------------------------------
应用层：
`报文message`。
Web文档HTTP、电子邮件SMTP、端系统文件FTP、域名系统DNS。
-----------------------------------------------
运输层：
`报文段segment`。
面向连接服务TCP，可靠传输、流量控制、拥塞控制机制。
无连接服务UDP，不可靠、无流量控制、无拥塞控制。
-----------------------------------------------
网络层：
`数据报datatgram`。
网际IP协议、路由选择协议。
网络层简称IP层。
网络层数据报通过路由器传输，
网络层依靠链路层的服务。
-----------------------------------------------
链路层：
`帧frame`。
以太网、WiFi、电缆接入网的DOCSIS协议都是链路层协议。
网络层将数据报下传给链路层，
链路层传给下个节点，再上传给网络层。
链路层提供节点到节点的可靠传递，
运输层TCP提供端到端的可靠交付。
数据报从源到目的经多个链路，被不同链路层协议处理，
网络层将受到来自链路层的不同服务。
-----------------------------------------------
物理层：
链路层将帧从节点到节点移动，
物理层将帧中比特从节点到节点移动。
协议仍然是链路层相关的，
进一步与实际传输媒体双绞线、同轴电缆、光纤相关。 
-----------------------------------------------
表示层：
使通信的应用程序能够解释交换数据的含义，
服务包括`数据压缩`和`数据描述`。
-----------------------------------------------
会话层：
提供了数据交换的界定和同步功能，
包括`建立检查点`和`恢复方案`的方法。
-----------------------------------------------
封装：
数据从发送端协议栈向下，
沿中间链路层交换机和路由器协议栈上上下下，
到达接收端协议栈。
-----------------------------------------------
`分组=首部字段+上层有效载荷字段`：
`应用层`报文传给`运输层`，
`应用层报文`加上`运输层首部信息`构成`运输层报文段`，
`运输层`报文段传给`网络层`，
`运输层报文段`加上`网络层首部信息`构成`网络层数据报`，
`网络层`数据报传给`链路层`，
`网络层数据报`加上`链路层首部信息`构成`链路层帧`。
实际封装更为复杂，一个大报文可被划分为多个运输层报文段，
接收端要从连续的数据报中重构报文段。
```
```
网络攻击：
受害主机统称为`僵尸网络`，
攻击者利用`僵尸网络控制`对目标主机
开展`垃圾邮件分发`和`分布式拒绝服务攻击`。
多数`恶意软件`是`自我复制`的，
恶意软件能够以`病毒`或者`蠕虫`形式扩散。
`病毒`需要`用户交互`来感染用户设备，
`蠕虫`不需要显式`用户交互`就能进入设备。
-----------------------------------------------
拒绝服务攻击DoS：
`DoS攻击`使得网络、主机、其他基础设施不能被合法用户使用。
`DoS`分为`弱点攻击`、`带宽洪泛`、`连接洪泛`。
-----------------------------------------------
Dos弱点攻击：
以适当顺序向易受攻击的应用程序或操作系统
发送制作精细的报文，导致服务器停止、主机崩溃。
-----------------------------------------------
Dos带宽洪泛：
攻击者向主机发送大量分组，
使接入链路拥塞，合法的分组无法到达服务器。
-----------------------------------------------
Dos连接洪泛：
攻击者在目标主机中创建大量半开或全开的TCP连接，
主机因伪造的连接陷入困境，并停止接收合法的连接。
-----------------------------------------------
分布式DDoS：
攻击者控制多个受害主机组成的`僵尸网络`向目标猛烈发送流量。
DoS带宽洪泛攻击,
服务器接入速率为`R bps`，攻击者需要`R bps`的速率产生危害，
如果R非常大，单一攻击源可能无法产生足够大的流量来伤害服务器， 
若单一源发出所有流量，上游路由器能够检测出攻击
并在该流量靠近服务器之前将其阻挡。
-----------------------------------------------
嗅探分组：
在`无线传输设备`附近放置一台被动的接收机即`分组嗅探器`，
该接收机就能得到传输的每个分组的副本。
`分组嗅探器`也能够部署在`有线广播环境`
如`LAN` `电缆接入技术`中，
攻击者获得机构与因特网的`接入路由器`或`接入访问权`
就能放置嗅探器获得分组副本、离线解析、提取敏感信息。
-----------------------------------------------
IP哄骗：
攻击者生成具有任意源地址、分组内容、目的地址的分组，传到因特网，
接收方如路由器将其作为真实地址，执行嵌入在该分组中的命令如修改转发表。
`端点鉴别机制`用于确保报文来自可靠源。
```

```
用户数字线DSL接入：
多个`DSL`与一个`分配器`相连，通过电话线即`双绞铜线`
与`本地中心局CO`的`DSL接入复用器` `DSLAM`相连，
再接入因特网。

`分配器` `DSLAM` 把电话和数据信号分开。

`DSL调制解调器` 数字数据转高频音
`不对称接入`传输速率：
高速下行信道：50kHz~1MHz频段；
中速上行信道：4kHz~50kHz频段；
普通双向电话信道：0~4kHz频段。 

`DSLAM` 模拟信号转数字形式。
-----------------------------------------------
电缆接入：
500~5000家庭由`同轴电缆`连成一个`地区枢纽`，
`地区枢纽`由光缆连接到`电缆头端`，再接入因特网。

电缆接入网`共享广播媒体`。 

`电缆调制解调器` 
同 `DSL调制解调器`，`不对称`信道，速率`下行>上行`。

`电缆调制解调器端接系统 CMTS` 
同 `DSLAM`，模拟信号转数字形式。
-----------------------------------------------
光纤到户FTTH：
从本地中心局直接到家庭，接入速率`每秒千兆比特`。
被动光纤网络PON：
用户路由器连接`光纤网络端接器ONT`，
`ONT`由光纤连接到`分配器`，再连接到电话公司的`光纤线路端接器OLT`。
`OLT`提供光电信号转换。
-----------------------------------------------
卫星和拨号：
无DSL、电缆和FTTH的环境，可用`卫星链路`接入因特网。
电话线拨号接入同DSL模式，
`家庭调制解调器`通过电话线连接到`ISP调制解调器`，但速率很慢。
-----------------------------------------------
企业接入：
`以太网接入`，
用户由`双绞铜线`与以太网交换机相连，再与因特网相连。
用户接入速率`100Mbps~1Gbps`，
服务器接入速率`1Gbps~10Gbps`。 

`无线局域网LAN`，
`无线接入技术`俗称`WiFi`，
用户位于接入点`数十米`内，接入点与企业网相连，再与因特网相连。
许多家庭将`宽带住宅接入`即`DSL`或`电缆`与`无线局域网技术`结合，
组成更强大的家用网络。
-----------------------------------------------
广域网接入：
`移动设备`如iPhone、安卓等
通过`蜂窝网提供商`运营的`基站`收发分组，
用户位于基站`数万米`内。
`第三代无线技术3G`无线广域网接入速率可达`1Mbps`。
`长期演进LTE`源于3G，接入速率可达`10Mbps`。
```
#### 20240810《计算机网络 自顶层向下方法》第2章
`HTTP;TCP Web 流式多媒体`
`SMTP;TCP 电子邮件`
`FTP;TCP 文件传输`
`Telnet;TCP 远程终端访问`
`SIP/RTP/或专用;UDP/TCP 因特网电话`

`应用` `应用层协议` `运输层协议`
`Web 流式视频` `电子邮件` `文件传输` `目录服务DNS`
`HTTP` `SMTP` `FTP` `Telnet`

`进程通信` `客户-服务器` `对等P2P 自扩展性` `混合`
`进程寻址` `套接字` `IP` `端口号`

`运输层协议` `可靠数据传输` `安全性` `吞吐量` `定时`
`分组丢失` `缓存溢出` `比特损坏` `加密传输` `解密交付`
`带宽保证` `弹性应用` `带宽敏感` `自适应编码技术` `时延保证`

`UDP` `无连接` `不可靠` `不控制`
`TCP` `面向连接` `可靠传输` `拥塞控制` `全双工` `非持续连接`
`SSL` `加密` `数据完整性检测` `端点鉴别`

`Web` `HTML` `引用对象` `URL` `主机 路径`
`HTTP TCP` `持续连接 默认`
`三次握手` `发起TCP连接` `收到响应` `HTTP请求` `响应报文` `TCP关闭`
`2次RTT` `排队时延` `处理时延` `传播时延`

`HTTP 无状态协议`
`初始请求` `标识码 数据库` `响应Set-cookie: 标识码`
`浏览器cookie文件` `再次请求` `请求cookie: 标识码`

`内容分发网络CDN` `代理服务器 Web缓存`
`TCP初次请求` `缓存无副本` `TCP 请求` `初始服务器响应缓存` `副本` `缓存响应客户`
`TCP再次请求` `缓存有副本` `缓存响应客户`
`TCP时隔请求` `缓存有副本` `条件GET请求If-Modified-Science` `初始服务器` `响应缓存304 Not Modified` `缓存响应客户`

`HTTP请求报文` `请求行` `首部行`
`方法`sp`URL`sp`版本`cr lf
`首部字段名`sp`值`cr lf 
cr lf 回车换行符
`实体体` POST

`HTTP响应报文` `状态行` `首部行` `实体体`
`版本`sp`状态码`sp`短语`cr lf 
`首部字段名`sp`值`cr lf 
cr lf 回车换行符
`实体体`

`GET` `POST` `HEAD` `PUT` `DELETE`
`cookie` `Host` `Connection` `User-agent` `Accept-language`

`200 OK`
`301 Moved Permanently`
`400 Bad Request`
`404 Not Found`
`505 HTTP Version Not Surpported`

`Set-cookie`
`Connection`
`Date`
`Server`
`Last-Modified`
`Content-Length`
`Content-Type`

---
`电子邮件` `异步通信媒介`
`用户代理` `邮件服务器` `简单邮件传输协议SMTP` `报文队列`
`SMTP TCP` `客户 服务器`
```
`端系统通信`：实际是端系统上`进程`通信。
`同一端系统通信`：进程通信机制由`操作系统`规定。
`客户-服务器进程`：发起通信进程是`客户`，等待联系进程是`服务器`。
`P2P进程`：进程既是`客户`又是`服务器`。

应用程序体系结构
由服务器间接通信/直接通信 `客户-服务器` `对等P2P` `混合`
`自扩展性` 对等方产生工作负载同时也为系统增加服务能力

进程寻址：
主机向主机进程发送分组，要目标识`目的主机`和`接收进程`。
`主机`由`IP地址`标识，`接收进程`由`接收套接字`标识，
因特网标准协议定义周知端口号`Web端口:80`，`邮件端口:25`。

套接字：
进程与运输层协议间的`接口`即`应用程序编程接口API`。
发送端将报文推进`套接字`，接收端将报文从`套接字`取出。
开发者可以控制套接字在应用层端的一切，但对运输层端少有控制权。

```
```
网络运输协议与因特网运输协议：
网络的运输协议服务包括四类，
`可靠数据传输`、`吞吐量`、`定时`、`安全性`。
`TCP`提供可靠的端到端数据传送，SSL加强以保证安全性。
从`TCP/UDP`看，`因特网运输层`不提供`吞吐量`和`定时`保证服务。
对于在因特网上运行的时间敏感应用，
它们被设计成尽最大可能对付减少时延。
`因特网`可以为时间敏感应用如因特网电话提供较好的服务，
但它`不提供`任何`定时`或`带宽`保证。
因特网的运输层协议服务：`TCP/UDP`
运输层协议`TCP/UDP`本身没有加密机制。
-----------------------------------------------
TCP服务：包括`面向连接`、`可靠数据传输`、`拥塞控制机制`。
`TCP面向连接`：
先握手建立连接，后传输数据，传输结束拆除连接。
全双工，即双方进程可以在连接上同时收发报文。
`TCP可靠数据传输`：
无差错、按顺序收发全部数据。
`TCP拥塞控制机制`：
网络拥塞时，
TCP拥塞控制会抑制发送进程客户或服务器，
或限制TCP连接以使其公平共享网络带宽。
`SSL`：
使用安全套接字层`SSL`加强的TCP。
提供安全性服务，包括`加密`、`数据完整性检测`、`端点鉴别`。

`发送进程`将明文数据传给`发送端SSL`套接字加密，
`发送端SSL`将加密数据传给`发送端TCP`套接字，
`发送端TCP`将加密数据传给`接收端TCP`套接字，
`接收端TCP`将加密数据传给`接收端SSL`进行解密。
-----------------------------------------------
UDP服务：
无连接，没有`握手过程`。
提供`不可靠数据传输`，不一定或可能乱序收到报文。
没有`拥塞控制机制`。

因特网电话应用使用UDP，
容忍一定丢失以达到一定速率，
避开TCP的拥塞控制和分组开销。
但由于大多防火墙被设置成阻挡多数类型的UDP流量，
因此因特网电话应用常被设计成
若UDP通信失败就使用TCP作为备份。
-----------------------------------------------
运输层协议：开发应用时，必须选择其中一种。
网络运输层协议服务分四类：`可靠数据传输`、`吞吐量`、`定时`、`安全性`。

可靠数据传输：实现端到端数据准确完整传输。 
不可靠数据传输：多媒体应用、交谈式音视频能够接受一定量数据丢失。
分组丢失：分组在路由器中缓存溢出，分组中比特损坏被丢弃。
吞吐量：如因特网电话对语音以`32kbps`的速率进行编码。
弹性应用：如邮件、文件传输、Web传送，能根据可用带宽利用吞吐量。
带宽敏感应用：如多媒体应用，具有吞吐量要求。
自适应编码技术：以与当前可用带宽相匹配的速率对数字音视频进行编码。
定时：如发送方注入套接字的比特到达接收方套接字的时间不少于`100ms`。
安全性：如发送方`加密传输`数据、接收方`解密交付`给进程。
```

```
`应用层协议`是`网络应用`的部分：
如Web是一种`客户-服务器`应用，
Web由文档格式标准HTML、浏览器、服务器、应用层协议HTTP组成；
如电子邮件是应用，
由邮件服务器、邮件客户程序、
定义邮件报文结构的标准、报文如何传递的应用层协议、
解释报文首部信息的应用层协议SMTP组成。
应用层协议：
`应用层协议`定义了不同端系统上应用如何互传报文。
包括报文类型、报文语法、字段语义、何时/如何发送/响应报文。
有些由`RFC`文档定义的`应用层协议`位于公共域中，
遵循`HTTP RFC`规则开发的浏览器
能访问遵循该标准的服务器并获得Web页面；
有些应用层协议是专用的，不为公共域使用。
因特网应用：
Web、文件传输、电子邮件、
目录服务DNS、流式视频、P2P；
```
```
Web和HTTP：
Web应用层协议即`超文本传输协议HTTP`是Web的核心。
Web页面：
多数Web页面含有一个HTML基本文件和几个引用对象。
对象是可以是HTML、JPEG图片、Java小程序、视频文件，通过URL地址寻址。
URL由对象存储`服务器主机名`和`对象路径名`组成。如
`http://www.someSchool.edu/someDepartment/picture.gif`，
`www.someSchool.edu`为主机名，剩下为路径名。

`HTTP`使用`TCP`作为`运输协议`，`提供`可靠数据传输`服务，
浏览器向服务器发起连接，浏览器和服务器进程通过套接字访问TCP，
请求报文脱离了客户控制进入TCP控制，体现分层体系结构特点，
HTTP不用关注TCP恢复数据丢失和乱序的细节。

HTTP的TCP连接：
HTTP默认使用`持续连接`，也能使用`非持续连接`。
`非持续连接`，每个请求经单独的TCP连接发送，
`持续连接`，所有请求经相同的TCP发送。
HTTP采用持续TCP连接：
服务器在发送响应报文后保持TCP连接，
相同客户与服务器间或相同服务器上多个Web页面
持续和请求响应可共用一个TCP连接，
通常，一定时间未被使用的连接会自动关闭。
HTTP/2是HTTP 1.1改版，
允许在相同连接中交错多个请求与响应。
```
```
HTTP采用非持续TCP连接：
服务器向客户传送一个Web页面，
页面包括1个HTML基本页面和10个JPEG图片共11个对象，
HTML文件的URL为
`http://www.someSchool.edu/someDepartment/home.index`

对于10个JPEG图片的TCP连接，并行连接可以缩短响应时间。 
用户可以配置浏览器以控制连接的并行度，默认开启5~10个并行TCP连接，
设置最大并行连接数为1，就会串行连接。
本次请求要产生11个TCP连接，每个TCP连接只传输一个请求和响应报文，
完毕后连接关闭。

非持续连接的缺点：
为每一个请求对象建立全新的连接，
客户和服务器都要分配TCP的缓冲区并保持TCP变量，
对同时服务于数以百计客户请求的服务器来说负荷太重。
每个对象都要经受两倍RTT交付时延，
一个用于创建TCP连接，一个用于请求和接收对象。

（1）
客户进程在默认端口号80
向服务器`www.someSchool.edu`发起TCP连接。
（2）
客户向服务器发送HTTP请求报文，
报文包含路径名`/someDepartment/home.index`。
（3）
服务器经套接字接收到请求报文，从存储器RAM或磁盘中检索出
对象`www.someSchool.edu/someDepartment/home.index`，
将其封装到响应报文中，通过套接字发送给客户。
（4）
服务器通知TCP断开该TCP连接，
确认客户完整收到响应报文，
TCP连接关闭。
（5）
客户从响应报文中提取出HTML文件，
得到对10个图片的引用，
对每个引用的图片重复前面步骤。
-----------------------------------------------
往返时间RTT：
一个分组从客户到服务器再返回客户的时间。
`RTT`包括`传播时延`、`排队时延`、`处理时延`。
用户点击超链接，
浏览器和Web服务器建立TCP连接，涉及`三次握手`。
客户向服务器发送一小段TCP报文，
服务器向客户发送一小段TCP响应报文，
客户向服务器发起确认以及正式请求，
三次握手后，服务器向客户发送请求的HTML对象。
三次握手的前两次占用一个`RTT`，
正式请求和回传文件占用另一个`RTT`，
`总响应时间`可视为`两个RTT`加上`传输HTML文件`的时间。
```
```
cookie：
HTTP是一种`无状态协议`：
服务器不会区别在短时间内来自同一个客户的重复请求，
而是把每次请求当作全新的请求，每次都会重新发送被请求的对象。
Web站点通过`cookie`识别、跟踪用户。
四个组件：
`HTTP请求报文cookie首部行`、`响应报文Set-cookie首部行`、
Web站点`后端数据库`、用户端系统浏览器管理的`cookie文件`。

用户首次访问站点时，需要提供一个用户标识，
后继会话中，浏览器向服务器发送cookie信息，
允许服务器在用户活动中标识该用户。
（1）
用户的请求报文达到服务器，
Web站点产生唯一标识码，
后端数据库产生一个表项，
服务器用发送响应报文到浏览器，
响应报文首部行包含`Set-cookie: 1678`。
（2）
浏览器获得首部行`Set-cookie: 1678`，
在它管理的cookie文件中添加一行信息，
包括服务器主机名和首部行中的识别码`1678`。
（3）
用户继续浏览服务器，每请求一个Web页面，
浏览器就会查询cookie文件并提取识别码`1678`，
放到HTTP请求报文首部行`cookie: 1678`中。
```

```
Web缓存：
也叫`代理服务器`，代理`初始服务器`满足客户的HTTP请求。
`Web缓存器`有自己的磁盘存储空间，保存最近请求对象的副本。
可配置浏览器使对某对象的请求首先被定向到Web缓存器。
`Web缓存器`既是服务器也是客户。
`Web缓存器`通常由ISP购买并安装。
`内容分发网络CDN`：
CDN公司在因特网上安装了许多地理上分散的缓存器，
使大量流量实现了本地化。

某浏览器向服务器请求某对象：
（1）
`浏览器`创建到`Web缓存器`的TCP连接，
向`Web缓存器`发送HTTP请求。
（2）
`Web缓存器`检查是否存储了对象副本，
若存在，向`浏览器`返回该对象。
（3）
若不存在，
`Web缓存器`与`初始服务器`建立TCP连接并发送请求，
`初始服务器`向`Web缓存器`返回HTTP响应报文以及对象。
（4）
`Web缓存器`在本地创建对象副本，
向`浏览器`发送包含副本的HTTP响应报文。
```
```
`机构网络`是个`100Mbps`高速局域网，
与因特网`初始服务器`以`15Mbps`的链路连接，
对象平均长`1Mb`，
机构浏览器访速`每秒15个请求`，
假设HTTP请求报文足够小不产生通信量。
`因特网时延`即路由器转发HTTP请求报文到收到响应报文的时间平均为`2秒`，
`总响应时间`即从浏览器请求到接收到对象的时间，
等于`局域网时延`、`接入时延`、`因特网时延`之和。

则`局域网流量强度`为
`（15个请求/秒）* （1Mb/请求）/100Mbps = 0.15`，
从因特网路由器到机构路由器即`接入链路流量强度`为
`（15个请求/秒）*（1Mb/请求）/15Mbps = 1`。
`局域网上流量强度`为0.15最多导致数十毫秒的时延，可忽略。
`接入链路流量强度`接近1，会导致非常大的时延并无限增长。
为改进时间响应特性

方案一，`增加接入链路速率`，将15Mbps改为100Mbps，
流量强度可以减少至0.15，但此种方案代价较高。

方案二，不升级链路带宽，`安装Web缓存器`，
Web缓存器满足的请求比率为`0.2~0.7`，
取命中率为0.4，由于客户和缓存连接在相同的高速局域网上，
40%的请求能立即得到缓存器响应，时延在10ms以内，
60%的请求需要初始服务器来满足，接入链路流量由1减小到0.6，
通常，15Mbps链路上流量强度小于0.8时的时延较小，为几十毫秒。
则平均时延为`0.4*0.01秒+0.6*2.01秒`略大于1.2秒，
此方案可以获得比方案一更低的时延，
机构无需升级到因特网的接入链路，
安装Web缓存器的成本是较低的。

`Web缓存器`可以减少客户请求响应时间，
当客户与初始服务器间瓶颈带宽远低于客户与Web缓存器间瓶颈带宽时更是如此。
`Web缓存器`可以减少接入链路到因特网的通信量，
减少了通信量即不必急于增加带宽，也就减少了费用。
```
```
条件GET方法：
Web缓存器保存的是对象的副本，
HTTP机制的`条件GET方法`可保证对象副本版本维持最新。
使用GET的请求报文包含了首部行`If-Modified-Science`，
则称此HTTP请求报文是一个`条件GET请求报文`。
（1）代理浏览器的缓存器向Web服务器发送请求报文：
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
（2）Web服务器返回响应报文给缓存器： 
HTTP/1.1 200 OK
Date: Sat, 3 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
Last-Modified: Wed, 9 Sep 2015 09:23:24
Content-Type: image/gif

(data data data data data ...)
（3）缓存器将对象以及最后修改时间备份，转发给浏览器。
（4）一星期后，另一用户再次请求该对象时，期间对象可能已被修改，
缓存器发送一个条件GET执行最新检查： 
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
If-modified-science: Wed, 9 Sep 2015 09:23:24
其中GET条件请求的If-modified-science
等于服务器最近响应缓存器的Last-Modified
（5）假设对象自上次响应未被修改，服务器返回响应报文给缓存器：
HTTP/1.1 304 Not Modified
Date: Sat, 10 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)

(empty entity body)
但响应报文中不再包含对象实体体，避免浪费带宽以及增加时延。
304 Not Modified 指示缓存器可以向用户发送对象副本。
（6）缓存器将对象副本发送给浏览器。
```
```
HTTP请求报文：
`GET /somedir/page.html HTTP/1.1`
`Host: www.comeschool.deu`
`Connection: close`
`User-agent: Mozilla/5.0`
`Accept-language: fr`

HTTP请求报文通用格式：
`方法` `sp` `URL` `sp` `版本` `cr` `lf` 请求行
`首部字段名` `sp` `值` `cr` `lf` 首部行
`cr` `lf` 回车换行符
`实体体`
-----------------------------------------------
`请求行`
方法字段可为`GET`、`POST`、`HEAD`、`PUT`、`DELETE`。
`首部行` `Host: www.comeschool.deu`
标识主机
`首部行` `Connection: close`
采用非连续的TCP连接，要求发送完被请求对象后关闭连接
`首部行` `User-agent: Mozilla/5.0`
标识用户代理即客户浏览器的类型，
此处为Mozilla/5.0即Firfox浏览器，
服务器会根据客户浏览器版本的不同发送不同版本的对象。
`首部行` `Accept-language: fr`
表示用户期望得到对象的法语版本，
若服务器没有此版本则发送默认版本。
-----------------------------------------------
使用`GET`方法，`实体体`为空，
使用`POST`方法，`实体体`为用户输入。
`用户提交表单`常使用`POST`以及`实体体`。
`用户提交表单`也可以不使用`POST`而使用`GET`，
`HTML`表单用`GET`方法，用户数据常被包含在`URL`中。
如一个表单包含`monkeys` `bananas`并使用`GET`，
则URL为`www.somesite.com/animalsearch? monkeys&bananas`
`HEAD`方法，
类似于`GET`，
服务器收到使用`HEAD`方法请求时，
将会使用一个HTTP报文进行相应，而不返回对象，
开发者常使用`HEAD`方法进行调试跟踪。
`PUT`方法，
常与Web工具联合使用，
允许用户上传对象到指定Web服务器的指定路径。
`DELETE`方法，
允许用户删除Web服务器上的对象。
```

```
HTTP响应报文：
`HTTP/1.1 200 OK`
`Connection: close`
`Date: Tue, 18 Aug 2015 15:44:054 GMT`
`Server: Apache/20203 (CentOS)`
`Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT`
`Content-Length: 6821`
`Content-Type: text/html`

`(data data data data data ...)`

HTTP响应报文通用格式：
`版本` `sp` `状态码` `sp` `短语` `cr` `lf` 状态行
`首部字段名` `sp` `值` `cr` `lf` 首部行
`cr` `lf` 回车换行符
`实体体`
-----------------------------------------------
`状态行` `HTTP/1.1 200 OK`
服务器正在使用HTTP/1.1，
且服务器找到并发送正请求的对象。
`首部行` `Connection: close`
发送完报文后关闭连接。
`首部行` `Date: Tue, 18 Aug 2015 15:44:054 GMT`
服务器产生并发送响应报文的日期和时间。
`首部行` `Server: Apache/20203 (CentOS)`
指示报文是由一台Apache Web服务器产生的，
类似于HTTP请求报文中的`User-agent`。
`首部行` `Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT`
对象创建或最后修改的日期和时间。
`首部行` `Content-Length: 6821`
被发送对象中的字节数。
`首部行` `Content-Type: text/html`
指示`实体体`中的对象是HTML文本。
-----------------------------------------------
状态码及其短语：
`200 OK` 
请求成功，信息在响应报文中返回。
`301 Moved Permanently` 
请求的对象已被永久转移，新的URL定义在首部行`Location`中，客户程序自动获取新的URL。
`400 Bad Request` 
请求不能被服务器理解。
`404 Not Found` 
请求的文档不在服务器上。
`505 HTTP Version Not Surpported` 
服务器不支持请求报文使用的HTTP协议版本。
```
---
```
异步通信媒介：当人们方便时就可以向他人发送邮件，不必与他人的计划协调。
邮件系统：用户代理、邮件服务器、简单邮件传输协议SMTP，Simple Mail Transfer Protocol
报文队列：用户代理传输邮件到发送方的邮件服务器，再传输到接收方邮件服务器，然后分发到接收方的邮箱中。若A不能将邮件传给B服务器，则在A服务器的报文队列中保持邮件报文，通常每30min进行一次尝试再次发送，若几日后仍不成功，则服务器删除该报文，并以邮件通知到A。
```
#### 20240905《计算机组成与设计 硬件/软件接口》第1章
下载：https://zh.z-lib.gs/book/3557011/6583d6/计算机组成与设计硬件软件接口原书第5版.html
##### 目录
###### 第1章计算机概要与技术
1.1引言
1.1.1计算应用的分类及其特性
1.1.2欢迎来到后PC时代
1.1.3你能从本书学到什么
1.2计算机系统结构中的8个伟大
思想
1.2.1面向摩尔定律的设计
1.2.2使用抽象简化设计
1.2.3加速大概率事件
1.2.4通过并行提高性能
1.2.5通过流水线提高性能
1.2.6通过预测提高性能
1.2.7存储器层次…
1.2.8通过元余提高可靠性
1.3程序概念人门·
1.4硬件概念人门10
1.4.1显示器
1.4.2触摸屏
1.4.3打开机箱2
1.4.4数据安全
1.4.5与其他计算机通信16
1.5处理器和存储器制造技术
1.6性能20
1.6.1性能的定义20
1.6.2性能的度量22
1.6.3CPU性能及其因素23
1.6.4指令的性能24
1.6.5经典的CPU性能公式23
1.7功耗墙27
1.8沧海巨变：从单处理器向多处理器
转变29
1.9实例：IntelCorei7基准37
1.9.1SPECCPU基准测试程序·31
1.9.2SPEC功耗基准测试程序….32
1.10逻误与陷饼
1.11本章小结
编1.12历史观点和拓展阅读
1.13练习题
###### 第2章指令：计算机的语言40
2.1引言10
2.2计算机硬件的操作1
2.3计算机硬件的操作数
2.3.1存储器操作数45
2.3.2常数或立即数操作数17
2.4有符号数和无符号数48
2.5计算机中指令的表示53
2.6逻辑操作58
2.7决策指令60
2.7.1循环
2.7.2case/switch语句63
2.8计算机硬件对过程的支持4
2.8.1使用更多的寄存器苏6
2.8.2嵌套过程7
2.8.3在栈中为新数据分配空间69
2.8.4在堆中为新数据分配空间70
2.9人机交互72
2.10MIPS中32位立即数和寻址75
2.10.132位立即数
2.10.2分支和跳转中的寻址….76
2.10.3MIPS寻址模式总结78
2.10.4机器语言解码79
2.11并行与指令：同步81
2.12翻译并执行程序83
2.12.1编译器83
2.12.2汇编器84
2.12.3链接器85
2.12.4加载器
2.12.5动态链接库87
2.12.6启动一个Java程序·89
2.13以一个C排序程序作为完整的
例子…90
2.13.1swap过程90
2.13.2sort过程91
2.14数组与指针96
2.14.1用数组实现clear
2.14.2用指针实现clear97
2.14.3比较两个版本的clear97
2.15高级内容：编译C语言和解释
Java语言98
2.16实例：ARMv7（32位）指令集……·98
2.16.1寻址模式·99
2.16.2比较和条件分支100
2.16.3ARM的特色100
2.17实例：x86指令集102
2.17.1Intelx86的改进102
2.17.2x86寄存器和数据寻址
模式103
2.17.3x86整数操作·105
2.17.4x86指令编码107
2.17.5x86总结·108
2.18实例：ARM8（64位）
指令集108
2.19透误与陷饼109
2.20本章小结10
翻2.21历史观点和拓展阅读
2.22练习题112
###### 第3章计算机的算术运算17
3.1引言117
3.2加法和减法117
3.3乘法121
3.3.1顺序的乘法算法和硬件..121
3.3.2有符号乘法124
3.3.3更快速的乘法124
3.3.4MIPS中的乘法124
3.3.5小结123
3.4除法·125
3.4.1除法算法及其硬件结构....25
3.4.2有符号除法128
3.4.3更快速的除法128
3.4.4MIPS中的除法129
3.4.5小结129
3.5浮点运算130
3.5.1浮点表示131
3.5.2浮点加法135
3.5.3浮点乘法138
3.5.4MIPS中的浮点指令139
3.5.5算术精确性145
3.5.6小结146
3.6并行性和计算机算术：子字
并行·148
3.7实例：x86中流处理SIMD扩展和
高级向量扩展149
3.8加速：子字并行和矩阵乘法150
3.9逻误与陷饼153
3.10本章小结155
3.11历史观点和拓展阅读158
3.12练习题159
###### 第4章处理器162
4.1引言162
4.2逻辑设计的一般方法165
4.3建立数据通路167
44个简单的实现机制13
4.4.1ALU控制173
4.4.2主控制单元的设计175
4.4.3为什么不使用单周期实现
方式181
4.5流水线概述182
4.5.1面向流水线的指令集
设计186
4.5.2流水线冒险186
4.5.3对流水线概述的小结191
4.6流水线数据通路及其控制192
4.6.1图形化表示的流水线200
4.6.2流水线控制203
4.7数据冒险：旁路与阻塞206
4.8控制冒险214
4.8.1假定分支不发生·215
4.8.2缩短分支的延迟.213
4.8.3动态分支预测216
4.8.4流水线小结220
4.9异常221
4.9.1MIPS体系结构中的异常
处理·221
4.9.2在流水线实现中的异常222
4.10指令级并行226
4.10.1推测的概念227
4.10.2静态多发射处理器227
4.10.3动态多发射处理器231
4.10.4能耗效率与高级流水线233
4.11实例：ARMCortex-A8和
IntelCorei7流水线234
4.11.1ARM Cortex- A8233
4.11.2Intel Core i7 920236
4.11.3IntelCorei7920的性能238
4.12运行更快：指令级并行和矩阵
乘法240
4.13高级主题：通过硬件设计语言
描述和建模流水线来介绍数字
设计以及更多流水线示例242
4.14逻误与陷242
4.15本章小结243
翻4.16历史观点和拓展阅读243
4.17练习题243
###### 第5章大容量和高速度：开发
存储器层次结构252
5.1引言252
5.2存储器技术·255
5.2.1SRAM技术256
5.2.2DRAM技术256
5.2.3闪存258
5.2.4磁盘存储器258
5.3cache的基本原理259
5.3.1cache访问261
5.3.2cache缺失处理265
5.3.3写操作处理266
5.3.4一个cache的例子：内置
FastMATH处理器267
5.3.5小结269
5.4cache性能的评估和改进270
5.4.1通过更灵活地放置块来减少
cache缺失272
5.4.2在cache中查找一个块275
5.4.3替换块的选择276
5.4.4使用多级cache结构减少
缺失代价277
5.4.5通过分块进行软件优化…280
5.4.6小结283
5.5可信存储器层次283
5.5.1失效的定义283
5.5.2纠正一位错、检测两位错的
汉明编码（SEC/DED）284
5.6虚拟机287
5.6.1虚拟机监视器的必备
条件….289
5.6.2指令集系统结构（缺之）
对虚拟机的支持289
5.6.3保护和指令集系统结构289
5.7虚拟存储器290
5.7.1页的存放和查找293
5.7.2缺页故障294
5.7.3关于写297
5.7.4加快地址转换：TLB297
5.7.5集成虚拟存储器、TLB
和cache300
5.7.6虚拟存储器中的保护302
5.7.7处理TLB缺失和缺页…....303
5.7.8小结307
5.8存储器层次结构的一般框架…309
5.8.1问题1：一个块可以被放在
何处·309
5.8.2问题2：如何找到一个块310
5.8.3问题3：当cache缺失时
替换哪一块311
5.8.4问题4：写操作如何处理....311
5.8.53C：一种理解存储器层次
结构行为的直观模型…312
5.9使用有限状态机来控制简单的
cache314
5.9.1一个简单的cache314
5.9.2有限状态机315
5.9.3一个简单的cache控制器的
有限状态机·316
5.10并行与存储器层次结构：cache
致性317
5.10.1实现一致性的基本方案318
5.10.2监听协议319
5.11并行与存储器层次结构：余
廉价磁盘阵列320
C5.12高级内容：实现cache
控制器320
5.13实例：ARMCortex-A8和Intel
Corei7的存储器层次结构320
5.14运行更快：cache分块和矩阵
乘法324
5.15透误和陷饼326
5.16本章小结329
Q5.17历史观点和拓展阅读329
5.18练习题329
###### 第6章从客户端到云的并行
处理器340
6.1引言340
6.2创建并行处理程序的难点342
6.3SISD、MIMD、SIMD、SPMD
和向量机·345
6.3.1在x86中的SIMD：多媒体
扩展·346
6.3.2向童机·346
6.3.3向量与标量的对比.347
6.3.4向量与多媒体扩展的
对比.348
6.4硬件多线程350
6.5多核和其他共享内存
多处理器352
6.6图形处理单元简介355
6.6.1NVIDIAGPU体系结构
简介·356
6.6.2NVIDIAGPU存储结构....57
6.6.3CPU展望358
5.7集群、仓储级计算机和其他消息
传递多处理器360
6.8多处理器网络拓扑简介363
翻6.9与外界通信：集群网络366
6.10多处理器测试集程序和性能
模型366
6.10.1性能模型368
6.10.2Roofline模型369
6.10.3两代Opteron的比较……370
6.11实例：评测IntelCorei7960和
NVIDIA Tesla GPU的 Roofline
模型373
6.12运行更快：多处理器和
矩阵乘法376
6.13逻误与陷378
6.14本章小结79
Q6.15历史观点和拓展阅读381
6.16练习题82
###### 附录A汇编器、链接器和SPIM仿真器389
###### 附录B逻辑设计基础437
###### 索引194
##### 笔记
```
二进制
1 kibibyte KiB 2^10 2%
2 mebibyte MiB 2^20 5%
3 gibibyte GiB 2^30 7%
4 tebibyte TiB 2^40 10%
5 pebibyte PiB 2^50 13%
6 exbiyte EiB 2^60 15%
7 zebibyte ZiB 2^70 18%
8 yobibyte YiB 2^80 21%

十进制
1 kilobyte KB 10^3
2 megabyte MB 10^6
3 terabyte TB 10^12
4 gigabyte GB 10^9
5 petabyte PB 10^15
6 exabyte EB 10^18
7 zettabyte ZB 10^21
8 yottabyte YB 10^24

```
```
$性能_{x} = 1/执行时间_{x}$
性能_{x}/性能_{y} = 执行时间_{x}/执行时间_{y} = n
CPU执行时间 = CPU时钟周期数 * 时钟周期
CPU执行时间 = CPU时钟周期数 / 时钟频率 
```
`PC` `服务器`` 嵌入式计算机`
`PMD` `云计算` `WSC` `SaaS`

`程序性能` `算法有效性` `软件系统` `机器指令有效性`
`I/O操作数量` `算法` `源码级语句数量`
`机器指令数量` `编程语言` `编译器` `体系结构`
`指令执行速度` `处理器` `存储系统`
`I/O操作执行速度` `I/O系统`

`8大思想`
`1摩尔定律` `2抽象` `3大概率` `4并行`
`5流水线` `6预测` `7存储器层次` `8冗余`

`抽象` `软件 系统软件 硬件`
`系统软件` `操作系统 编译程序 加载程序 汇编程序`
`Linux iOS Windwos` 
`软硬件接口` `管理计算机资源` `输入输出` `分配内外存` `共享资源`
`二进制位` `指令` `机器语言` `汇编语言` `汇编程序` `高级编程语言`
`自然语言思考` `按用途进行设计` `程序相对独立于计算机`

`硬件` `输入 输出 处理 存储`
`设备` `输入输出` `存储器` `处理器 运算器 控制器`


`显示器` `LCD` `动态矩阵显示`
`像素` `位图` `帧缓冲区` `光栅`

`存储器`
`内存` `DRAM` `大而慢 便宜`
`缓存` `SRAM` `小而快 较贵`
`主要存储器` `易失性存储器 DRAM`
`二级存储器`
`非易失性存储器` `磁盘 服务器 5~20ms`
`非易失性半导体存储器` `闪存 PMD 5~50ms` `100 000~1000 000`

`指令集体系结构`
`应用二进制接口ABI` `基本指令集 操作系统接口`

`联网` `通信、资源共享、远距离访问`
`半导体CMOS`

`处理器 存储器`
`真空管` `晶体管` `集成电路IC`
`超大规模集成电路VLSI` `甚大规模集成电路`


`芯片` `硅 半导体`
`导电体` `细铜铝线`
`绝缘体`  `塑料、玻璃膜`
`可控导电体或绝缘体` `开关` `晶体管`

`芯片`
`硅锭 直径8~12英寸 长度12~24英寸`
`晶圆 厚不超0.1英寸` `图样化晶圆`
`晶圆测试器` `芯片`
`测良率` `封装` `测试` `交用户`

`芯片数 ~= 晶圆面积/芯片面积`
`芯片价格 = 晶圆价格/成品芯片数`
`成品率 = 1/[1+(瑕疵数*芯片面积/2)]^2`


`响应时间 执行时间`
`硬盘访问` `内存访问` `I/O活动` `系统开销` `CPU执行时间`
`吞吐率 带宽` `单位时间完成的任务数`

`总时间` `墙上时钟时间` `响应时间` `消逝时间`
`CPU执行时间` `用户CPU时间` `系统CPU时间`
`系统性能 空载系统的响应时间`
`CPU性能 用户CPU时间`

 

```
计算机应用分类：个人计算机PC、服务器、嵌入式计算机。
服务器：功能和价格幅度大，低至千元，高至上亿。执行大负载任务，基于其他源软件修改定制。高端服务器称超级计算机。
嵌入式计算机：数量最多。运行单一或相关组应用程序，与硬件集成。以尽快速度执行有线功能，此外降低成本和功耗是最大目标。对故障敏感，面向消费者，通过简单设计来获得可靠性；大型嵌入式系统，在服务器领域采用多种冗余技术。

后PC时代（PostPC Eva）：
个人移动设备PMD代替传统PC：（Personal Mobile Device）智能手机，平板电脑。
云计算代替传统服务器：巨型数据中心，仓储规模计算机（Warehouse ScaleComputer，WSC）。云计算的软件即服务（Software as a Service，SaaS），在网络上以服务的方式提供软件和数据，登录本地客户端运行远程服务器。如Web搜索与社交网络。

简单存储模型：20世纪六七十年代，限制计算机性能的主要因素是内存容量。
现代计算机：处理器的并行性，内存的层次性，运行在PMD或云上的程序能效。

程序性能：算法有效性、软件系统、硬件机器指令有效性。
算法，决定了源码级语句数量和I/O操作数量。
编程语言、编译器、体系结构，决定了源码语句对应机器指令数量。
处理器、存储系统，决定指令执行速度。
I/O系统：决定了I/O操作执行速度。

数据级并行，C语言的子字并行；
指令级并行，多指令发射和乱序执行硬件；
存储器层次优化，阻塞cache
线程级并行，OpenMP中循环并行开发多核硬件。

计算机系统结构8大思想：
1面向摩尔定律的设计
2使用抽象简化设计
3加速大概率事件
4通过并行提高性能
5通过流水线提高性能
6通过预测提高性能
7存储器层次
8通过冗余提高可靠性

抽象：软件、系统软件、硬件
系统软件：操作系统、编译程序、加载程序、汇编程序等。
操作系统：系统软件中操作系统、编译程序对现代计算机是必须的。操作系统是软硬件接口，提供服务、监控功能，是管理计算机资源的监控程序。主要功能有，输入输出，分配内外存，共享资源。常见操作系统，Linux、iOS、Windwos。
编译程序：把高级语言编写的程序翻译成机器指令。

二进制位：计算机语言基本元素。
指令：二进制位串。
机器语言：用二进制位表示的机器指令。
汇编语言：用助记符表示的机器指令。
汇编程序：将助记符自动翻译成二进制位指令。
高级编程语言：由单词和代数符组成，由编译器转换成汇编语言。自然语言思考，按用途进行设计，程序相对独立于计算机。

硬件功能：输入数据、输出数据、处理数据、存储数据。
硬件部件：输入输出、存储器、数据通路即运算器、控制器。运算器、控制器统称处理器。
输入输出：关键部件，输入设备如键盘，输出设备如显示器。无线网络等设备既是输入也是输出。
集成电路：即芯片，几十至几百晶体管连接起来的设备。
处理器：即中央处理单元CPU。
数据通路：执行数据运算操作。
控制器：处理器根据程序指令指挥数据通路、存储器、I/O设备。

显示器：I/O设备。液晶显示器（Liquid Crystal Display，LCD）。LCD含棒状液态分子团形成的转动螺旋线，控制光传输。通电时，分子棒不弯曲，偏光板间的液晶材料阻止光线通过。
液晶：不施加电压时，将背光源入射光扭转90度，显示屏呈白色；施加电压时，光线不弯曲，显示屏成黑色。
动态矩阵显示：用晶体管控制单像素上光线传输。每个像素由一个晶体管精准控制电流。彩色动态矩阵LCD中，红绿蓝屏决定颜色分量强度，每点3个晶体管。
像素：图像最小单元，屏幕由像素矩阵形成。
位图：由二进制矩阵表示的像素图。矩阵大小 1024*768~2048*1536。彩色显示器，8位一原色，每像素24位。
帧缓冲区：将显示图像保存在帧缓存区中，计算机硬件采用光栅刷新缓冲区，每个像素的二进制值以刷新频率读出到显示器。光栅扫描CRT。
触摸屏：PC使用LCD，后PC时代通常使用电容感应，在绝缘玻璃上覆盖一层透明导体，人作为导体接触屏幕，会使屏幕的电场发生变化导致电容发生变化，允许接触多个点。
```
```
部件：
处理器、存储器、无线通信芯片 WiFi、蓝牙、调频调谐器
前置摄像组件 摄像头、耳机插孔、麦克风
加速计、陀螺仪、音量控制、屏幕旋转锁定按钮
扬声器组件
电容性触摸屏控制器

逻辑主板 芯片 双核ARM处理器 主存
非易失性闪存芯片
电源控制、I/O控制芯片

微处理器集成电路 12.1mm*10.1mm 45nm工艺制造
双核ARM处理器
4通路图形处理器单元GPU
存储器芯片

存储器层次：DRAM、SRAM
DRAM：动态随机访问存储器（dynamic random access memory,DRAM）。与串行访问内存即磁带不同，无论存储在什么位置，DRAM访问所需的时间基本相同。集成电路形式的存储器，可以随机访问任何地址的内存，访问时间大约为50ns。内存：大而慢，由多片DRAM组成，程序运行时的存储空间，同时存储运行时数据。
SRAM：缓存（cache memory）小而快，处理器内部的缓存器，一般作为DRAM的缓冲。cache采用静态随机访问存储器SRAM。SRAM比DRAM快，集成度低。

易失性存储器：主存储器，DRAM占主导，仅在加电时保存数据如内存。
非易失性存储器：二级存储器，磁盘占主导，掉电时仍可保存数据如DVD。
非易失性半导体存储器：闪存在个人移动设备中替代了磁盘，是PMD的二级存储标准。闪存体积、电容、可靠性、能耗方面比磁盘更好，比DRAM慢、便宜。闪存写100 000~1 000 000次后老化损坏，文件系统必须记录写操作数目，避免存储器损坏，避免移动经常使用的数据。半导体CMOS。
主存储器：主要存储器，是易失性存储器，DRAM占主导。用于保持运行中的程序。
二级存储器：非易失性存储器，个人移动设备PMD中一般闪存占主导，服务器中磁盘占主导。保存连词运行间的程序和数据。
磁盘：即硬盘，非易失性二级存储器。旋转的机械设备，磁盘方位时间约5~20ms。
闪存：非易失性半导体存储器，比磁盘块，比DRAM慢。访问时间约5~50ms。

体系结构：即指令集体系结构。是硬件和底层软件之间的抽象接口。包含了需要编写正确运行机器语言程序所需要的全部信息，包括指令、寄存器、存储访问、I/O等。
应用二进制接口：（Application Binary Interface,ABI），基本指令集和操作系统接口。定义了二进制层次可移植的计算机标准。
```
```
联网计算机优点：通信、资源共享、远距离访问
以太网：最普遍的网络类型。传输距离可达1000km，传输速率可达40Gbps。
局域网：（Local Area Network,LAN），同一栋大楼内通过交换机进行连接，提供路由与安全服务。
广域网：几百千km范围内。可支持万维网作为因特网骨干，以光纤为基础向通信公司租用。

发展：
邮件介质磁带。局域网技术。广域网技术。
后PC时代的无线技术。
半导体CMOS技术。生产无线电，存储器、微处理器。

处理器和存储器
真空管、晶体管、集成电路、超大规模集成电路、甚大规模集成电路

晶体管：（transistor）由电信号控制的开关。
集成电路：（IC）成千上万晶体管组成的芯片。  超大规模集成电路：（very large-scale integrated circuit,VLSI）

芯片：硅，半导体（semiconductor）
良好导电体 类似细微铜或铝线
良好绝缘体 类似塑料或玻璃膜
可控导电体或绝缘体 类似开关 晶体管


硅锭：硅晶棒，直径8~12英寸，长度12~24英寸。
晶圆：厚度不超过0.1英寸的硅锭片，用于制作芯片。
封装：合格芯片连接到I/O引脚上。
芯片制作：
硅锭，切片，晶圆，20~40生产步骤，图样化晶圆，
晶圆测试器，切片，芯片，测试良率，封装合格芯片，
测试，交给用户。

芯片成本取决于芯片面积和晶圆面积，与芯片面积一般不是线性的。
成品芯片数 = 芯片数 * 成品率
芯片数 ~= 晶圆面积/芯片面积
芯片价格 = 晶圆价格/成品芯片数
成品率 = 1/[1+(瑕疵数*芯片面积/2)]^2

```
$性能_{x} = 1/执行时间_{x}$
性能_{x}/性能_{y} = 执行时间_{x}/执行时间_{y} = n

A执行程序要10s，B执行程序要15s，A比B快多少？
性能_{A}/性能_{B} = 执行时间_{B}/执行时间_{A}
= 15/10 = 1.5

CPU执行时间 = CPU时钟周期数 * 时钟周期
CPU执行时间 = CPU时钟周期数 / 时钟频率
```
计算机性能
响应时间：即执行时间，计算机完成某任务的总时间。硬盘访问、内存访问、I/O活动、系统开销、CPU执行时间等。
吞吐率：即带宽，单位时间完成的任务数量。

计算机系统中，响应时间和吞吐量相互影响。
增加吞吐率或减少响应时间以改进系统性能。
1处理器更换为更高速型号。降低时间几乎都可以增加吞吐率。
2使用多个处理器同时处理独立任务。只会增加吞吐率，不会使任务完成更快。处理更多任务时，吞吐量的增加可以缩小排队时间从而改进响应时间。

时间度量计算机性能。
总时间 = 墙上时钟时间 = 响应时间 = 消逝时间
CPU执行时间 = 用户CPU时间 + 系统CPU时间
用户CPU时间，用于用户程序的时间
系统CPU时间，操作系统为用户提供服务的时间

系统性能：空载系统的响应时间。
CPU性能：用户CPU时间。

时钟周期：计算机硬件设计者关心硬件完成基本功能的速度。几乎所有计算机都用时钟来驱动硬件中各种事件。时钟间隔的时间为时钟周期。它的倒数称时钟频率。如时钟周期250ps，时钟频率4GHz。
时钟长度：时钟周期持续的时间长度。
```


